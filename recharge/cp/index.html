<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
  <title>mobicashservices</title>
  <style>
    *{box-sizing:border-box;font-family:Arial,sans-serif}
    html,body{margin:0;padding:0;background:transparent;color:#fff}
    .main-box{width:100%;margin:0;background:#0b0c10}
    .form-wrapper{padding:10px 0}
    .form-content{padding:0 10px;max-width:100%;margin:auto}
    .payment-line{display:flex;align-items:center;justify-content:flex-start;text-align:left;margin:6px 0;flex-wrap:nowrap}
    .blue-text{font-size:14px;color:#28c76f}
    .blue-text strong{font-weight:600}
    .normal-text{font-weight:normal;color:#aaa}
    .copy-icon{display:flex;align-items:center;margin-left:6px}
    .copy-icon img{
      width:16px;height:16px;cursor:pointer;
    }
    .copied-text{color:#28c76f;font-size:13px;margin-left:4px;visibility:hidden}
    .copied-text.show{visibility:visible}
    .info-block{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:15px;gap:10px}
    .info-label{flex:0 0 55%;max-width:55%;text-align:left;color:#fff;font-weight:500;font-size:14px;line-height:1.3;white-space:normal;word-break:break-word}
    .info-input{flex:0 0 45%;max-width:45%;display:flex;align-items:center;justify-content:flex-end}
    input[type=text]{width:100%;padding:8px 10px;font-size:15px;border:none;border-top:1px solid #444;border-left:1px solid #444;border-radius:0;text-align:center;background:#1c1c1c;color:#fff}
    .english-numbers{direction:ltr;unicode-bidi:plaintext;text-align:center;font-feature-settings:"lnum"}
    input:focus,textarea:focus{outline:none!important;box-shadow:0 0 0 1px #28c76f;border-color:#28c76f}
    .upload-section{background:#333;width:70px;height:70px;display:flex;align-items:center;justify-content:center;flex-shrink:0;border:1px dashed #555}
    .upload-section input[type=file]{display:none}
    .upload-section label{font-size:30px;color:#28c76f;cursor:pointer;line-height:1}
    .preview-image{width:70px;height:70px;object-fit:cover;border:1px solid #28c76f;display:none;flex-shrink:0}
    .note{font-size:12px;color:#aaa;margin-top:4px;font-weight:normal;line-height:1.3}
    .submit-btn{background:#28c76f;color:#fff;font-size:16px;padding:14px;border:none;width:100%;cursor:pointer;transition:.3s ease;font-weight:600;border-radius:4px}
    .submit-btn:hover:not(:disabled){background:#22b05b}
    .submit-btn:disabled{background:#666;cursor:not-allowed}
    .submit-btn:focus,.submit-btn:active{outline:none!important;box-shadow:0 0 0 1px #28c76f}
    @media (max-width:480px){
      .note,.blue-text{font-size:12px;line-height:1.2}
      .info-label{font-size:12px;line-height:1.2}
      .copy-icon img{width:14px;height:14px}
      .copied-text{font-size:12px}
    }
  </style>
</head>
<body>
  <div class="main-box">
    <div class="form-wrapper">
      <form class="form-content" id="transferForm">
        <div class="payment-line">
          <span class="blue-text"><strong>CASHPLUS JAWAHER</strong> <span class="normal-text">0767442227</span></span>
          <span class="copy-icon" onclick="copyText(this,'0767442227')">
            <img src="https://iili.io/KzxN4pV.png" alt="copy-icon">
            <span class="copied-text">Copié</span>
          </span>
        </div>
        <div class="payment-line">
          <span class="blue-text"><strong>Motif :</strong> <span class="normal-text">jawaher</span></span>
          <span class="copy-icon" onclick="copyText(this,'jawaher')">
            <img src="https://iili.io/KzxN4pV.png" alt="copy-icon">
            <span class="copied-text">Copié</span>
          </span>
        </div>
        <div class="info-block">
          <div class="info-label">Montant (Min 100.00 MAD / Max 5000.00 MAD):</div>
          <div class="info-input">
            <input type="text" name="amount" class="english-numbers" value="100.00" required>
          </div>
        </div>
        <div class="info-block">
          <div class="info-label">NOM et prénom / الإسم الكامل لصاحب الحساب البنكي:</div>
          <div class="info-input">
            <input type="text" name="sender_name" id="sender_name" oninput="validateName(this)" required>
          </div>
        </div>
        <div class="upload-block" style="display:flex;align-items:center;gap:10px;margin-bottom:15px;flex-wrap:nowrap">
          <div style="flex:0 0 55%;max-width:55%;text-align:left;color:#fff;font-size:14px;line-height:1.3">
            <strong>من فضلك قم بتحميل الاسكرين شوت<br>لعمليه التحويل الناجحه:</strong>
            <div class="note">(.jpg, .jpeg, .png, .pdf. La taille maximale du fichier est de 20 Mo)</div>
          </div>
          <div style="flex:0 0 45%;max-width:45%;display:flex;align-items:center;gap:10px;justify-content:flex-start">
            <div class="upload-section">
              <label for="proof">+</label>
              <input type="file" id="proof" name="proof" accept=".jpg,.jpeg,.png,.pdf" required>
            </div>
            <img id="preview" class="preview-image" />
          </div>
        </div>
        <button type="submit" class="submit-btn" id="submitBtn">CONFIRMER</button>
      </form>
    </div>
  </div>
  <input type="text" id="hiddenCopyInput" style="position:absolute;top:-9999px;left:-9999px;" readonly>
  <script>
    function copyText(el,val){
      if(navigator.clipboard){
        navigator.clipboard.writeText(val).then(()=>showCopied(el)).catch(()=>fallbackCopy(el,val))
      }else fallbackCopy(el,val)
    }
    function fallbackCopy(el,val){
      const i=document.getElementById('hiddenCopyInput');i.value=val;i.select();document.execCommand('copy');showCopied(el)
    }
    function showCopied(el){
      const c=el.querySelector('.copied-text');if(c){c.classList.add('show');setTimeout(()=>c.classList.remove('show'),1200)}
    }
    document.getElementById('proof').addEventListener('change',e=>{
      const f=e.target.files[0],p=document.getElementById('preview');
      if(f&&f.type.startsWith('image/')){
        const r=new FileReader();r.onload=ev=>{p.src=ev.target.result;p.style.display='block'};r.readAsDataURL(f)
      }else{p.src='';p.style.display='none'}
    });
    function getSecureURL(){
      return "https://script.google.com/macros/s/AKfycby_yPgXCCFpvGRQ4Doa1FMfHS4jXd5y8p--fPQAFnADcFI6IcvfPp5WtZjt2GjqXzoneQ/exec"
    }
    document.getElementById("transferForm").addEventListener("submit",async e=>{
      e.preventDefault();
      const f=e.target,a=f.amount.value.trim(),n=f.sender_name.value.trim(),file=document.getElementById("proof").files[0],btn=document.getElementById("submitBtn");
      if(!file||!n||!a){alert("يرجى ملء جميع الحقول وتحميل الصورة.");return}
      btn.disabled=true;const t=btn.innerText;btn.innerText="جاري الإرسال...";
      try{
        const r=new FileReader();
        r.onloadend=async function(){
          const b=r.result;
          const res=await fetch(getSecureURL(),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({amount:a,fullname:n,imageBase64:b})});
          if(res.ok)window.location.replace("secure-recharge-cp.html");
          else{alert("حدث خطأ أثناء الإرسال، حاول مرة أخرى.");btn.innerText=t;btn.disabled=false}
        };
        r.readAsDataURL(file)
      }catch(err){alert("تعذر إرسال الصورة.");console.error(err);btn.innerText=t;btn.disabled=false}
    });
    function validateName(i){
      i.value=i.value.split('').filter(c=>/^[a-zA-Z\s]$/.test(c)).join('')
    }
  </script>
</body>
</html>
